<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <h1 align="center" style="background:#aaaaff;color: #ffffff">Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø­Ù…Ø±ÙŠØ© Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ù„Ø«Ø§Ù„Ø«Ø© Ø¨Ù†ÙŠÙ†</h1>
 
  <title>ØªÙˆØ§ØµÙ„Ù†Ø§ </title>
   <h1 align="center" style="font-weight: 800; color: #004be3" >Ù†Ø¸Ø§Ù… Ø¯Ø¹Ù… Ø§Ù„Ù†Ø·Ù‚ Ù„Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ù‡Ù…Ù… Ø¨Ø£Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹Ù‰ </title></h1>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <header class="topbar">
    <div style="text-align:center; font-size:26px; font-weight:bold; margin-top:15px;">
      <span style="font-size: 40px; color: #a60000">ğŸ—£ï¸ ØªÙˆØ§ØµÙ„Ù†Ø§</span>
    </div>
  </header>

  <nav class="tabs" id="category-tabs"></nav>
  <div id="phrase-text" class="phrase-text">Ø§Ø®ØªØ± Ø±Ù…Ø²Ù‹Ø§ Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¬Ù…Ù„Ø© Ù‡Ù†Ø§...</div>
  <main><div id="grid" class="grid"></div></main>

  <footer class="bottom-bar">
    <button id="btn-record" class="control-btn">ğŸ™ï¸ ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ</button>
    <button id="btn-voice" class="control-btn">ğŸ” ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØµÙˆØª: <span id="voice-label">Ø°ÙƒØ±ÙŠ</span></button>
    <button id="btn-fav" class="control-btn">â­ Ø§Ù„Ù…ÙØ¶Ù„Ø©</button>
    <button id="btn-speak" class="control-btn primary">ğŸ”Š Ù†Ø·Ù‚ Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</button>
    <button id="btn-clear" class="control-btn danger">ğŸ—‘ Ù…Ø³Ø­</button>
  </footer>

  <script>
  const categories = [
    { id:"basic", name:"Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©", icon:"ğŸ’§", color:"#BBDEFB",
      items:[
        {label:"ğŸ’§ Ù…Ø§Ø¡", phrase:"Ø£Ø±ÙŠØ¯ Ù…Ø§Ø¡Ù‹"},
        {label:"ğŸš» Ø¯ÙˆØ±Ø© Ø§Ù„Ù…ÙŠØ§Ù‡", phrase:"Ø£Ø±ÙŠØ¯ Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ø¯ÙˆØ±Ø© Ø§Ù„Ù…ÙŠØ§Ù‡"},
        {label:"ğŸ½ï¸ Ø·Ø¹Ø§Ù…", phrase:"Ø£Ù†Ø§ Ø¬Ø§Ø¦Ø¹"},
        {label:"ğŸ†˜ Ù…Ø³Ø§Ø¹Ø¯Ø©", phrase:"Ø£Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø³Ø§Ø¹Ø¯Ø©"},
        {label:"ğŸ˜´ Ø£Ø±ØªØ§Ø­", phrase:"Ø£Ø±ÙŠØ¯ Ø£Ù† Ø£Ø±ØªØ§Ø­ Ù‚Ù„ÙŠÙ„Ù‹Ø§"},
        {label:"ğŸ¤• Ø£Ù„Ù…", phrase:"Ø£Ø´Ø¹Ø± Ø¨Ø§Ù„Ø£Ù„Ù…"}
      ]
    },
    { id:"school", name:"Ø§Ù„Ù…Ø¯Ø±Ø³Ø©", icon:"ğŸ«", color:"#FFE0B2",
      items:[
        {label:"ğŸ‘©â€ğŸ« Ø§Ù„Ù…Ø¹Ù„Ù…", phrase:"Ø£Ø±ÙŠØ¯ Ø§Ù„ØªØ­Ø¯Ø« Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„Ù…"},
        {label:"ğŸ“– ÙƒØªØ§Ø¨", phrase:"Ø£Ø­ØªØ§Ø¬ ÙƒØªØ§Ø¨ÙŠ"},
        {label:"âœï¸ Ù‚Ù„Ù…", phrase:"Ø£Ø­ØªØ§Ø¬ Ù‚Ù„Ù…Ù‹Ø§"},
        {label:"ğŸ–¥ï¸ Ø­Ø§Ø³ÙˆØ¨", phrase:"Ø£Ø±ÙŠØ¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø­Ø§Ø³ÙˆØ¨"},
        {label:"â¸ï¸ Ø§Ø³ØªØ±Ø§Ø­Ø©", phrase:"Ø£Ø±ÙŠØ¯ Ø§Ø³ØªØ±Ø§Ø­Ø©"}
      ]
    },
    { id:"home", name:"Ø§Ù„Ø¨ÙŠØª", icon:"ğŸ ", color:"#F8BBD0",
      items:[
        {label:"ğŸ‘© Ø£Ù…ÙŠ", phrase:"Ø£Ø±ÙŠØ¯ Ø£Ù…ÙŠ"},
        {label:"ğŸ‘¨ Ø£Ø¨ÙŠ", phrase:"Ø£Ø±ÙŠØ¯ Ø£Ø¨ÙŠ"},
        {label:"ğŸ§© Ø£Ù„Ø¹Ø¨", phrase:"Ø£Ø±ÙŠØ¯ Ø£Ù† Ø£Ù„Ø¹Ø¨"},
        {label:"ğŸ“º ØªÙ„ÙØ§Ø²", phrase:"Ø£Ø±ÙŠØ¯ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ØªÙ„ÙØ§Ø²"},
        {label:"ğŸšª Ø§Ù„Ø®Ø§Ø±Ø¬", phrase:"Ø£Ø±ÙŠØ¯ Ø§Ù„Ø®Ø±ÙˆØ¬"}
      ]
    },
    { id:"feelings", name:"Ø§Ù„Ù…Ø´Ø§Ø¹Ø±", icon:"ğŸ’–", color:"#C8E6C9",
      items:[
        {label:"ğŸ˜Š Ø³Ø¹ÙŠØ¯", phrase:"Ø£Ù†Ø§ Ø³Ø¹ÙŠØ¯"},
        {label:"ğŸ˜¢ Ø­Ø²ÙŠÙ†", phrase:"Ø£Ù†Ø§ Ø­Ø²ÙŠÙ†"},
        {label:"ğŸ˜  ØºØ§Ø¶Ø¨", phrase:"Ø£Ù†Ø§ ØºØ§Ø¶Ø¨"},
        {label:"ğŸ˜¨ Ø®Ø§Ø¦Ù", phrase:"Ø£Ù†Ø§ Ø®Ø§Ø¦Ù"},
        {label:"â¤ï¸ Ø£Ø­Ø¨", phrase:"Ø£Ù†Ø§ Ø£Ø­Ø¨ Ø°Ù„Ùƒ"}
      ]
    },
    { id:"study", name:"Ø§Ù„Ø¯Ø±Ø§Ø³Ø©", icon:"ğŸ“š", color:"#B3E5FC",
      items:[
        {label:"ğŸ§® Ø±ÙŠØ§Ø¶ÙŠØ§Øª", phrase:"Ø£Ø±ÙŠØ¯ Ø­Ù„ Ù…Ø³Ø§Ø¦Ù„ Ø±ÙŠØ§Ø¶ÙŠØ§Øª"},
        {label:"ğŸ§ª Ø¹Ù„ÙˆÙ…", phrase:"Ø£Ø±ÙŠØ¯ ØªØ¬Ø±Ø¨Ø© Ø¹Ù„Ù…ÙŠØ© Ù…Ù…ØªØ¹Ø©"},
        {label:"ğŸ“– Ù‚Ø±Ø§Ø¡Ø©", phrase:"Ø£Ø±ÙŠØ¯ Ø£Ù† Ø£Ù‚Ø±Ø£ Ù‚ØµØ©"},
        {label:"âœï¸ Ø¥Ù…Ù„Ø§Ø¡", phrase:"Ø£Ø±ÙŠØ¯ Ø£Ù† Ø£ÙƒØªØ¨ ÙƒÙ„Ù…Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©"},
        {label:"ğŸ”¤ Ø­Ø±ÙˆÙ", phrase:"Ø£Ø±ÙŠØ¯ Ø£Ù† Ø£ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙˆÙ"}
      ]
    }
  ];

  const tabs = document.getElementById("category-tabs");
  const grid = document.getElementById("grid");
  const phraseBox = document.getElementById("phrase-text");
  let currentCategory = categories[0].id;
  let currentVoice = "male";
  let currentPhrase = "";

  categories.forEach((cat, index) => {
    const btn = document.createElement("button");
    btn.className = "tab-btn" + (index === 0 ? " active" : "");
    btn.innerHTML = `<span style="font-size:40px;">${cat.icon}</span> ${cat.name}`;
    btn.onclick = () => {
      document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      currentCategory = cat.id;
      renderGrid();
    };
    tabs.appendChild(btn);
  });

  async function speakFromServer(text) {
    if (!text) return;
    const response = await fetch("/tts", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text, voice: currentVoice })
    });
    const blob = await response.blob();
    const url = URL.createObjectURL(blob);
    const audio = new Audio(url);
    audio.play();
  }

  function renderGrid() {
    const cat = categories.find(c => c.id === currentCategory);
    grid.innerHTML = "";
    cat.items.forEach(item => {
      const card = document.createElement("button");
      card.className = "card";
      card.style.background = cat.color;
      card.innerHTML = `<div style="font-size:25px;">${item.label}</div>`;
      card.onclick = () => {
        phraseBox.textContent = item.phrase;
        currentPhrase = item.phrase;
        speakFromServer(item.phrase);
      };
      grid.appendChild(card);
    });
  }

  document.getElementById("btn-voice").onclick = function() {
    currentVoice = (currentVoice === "male") ? "female" : "male";
    document.getElementById("voice-label").textContent = (currentVoice === "male") ? "Ø°ÙƒØ±ÙŠ" : "Ø£Ù†Ø«ÙˆÙŠ";
  };

  document.getElementById("btn-speak").onclick = function() {
    if (currentPhrase) speakFromServer(currentPhrase);
  };

  document.getElementById("btn-clear").onclick = function() {
    phraseBox.textContent = "";
    currentPhrase = "";
  };

  document.getElementById("btn-fav").onclick = function() {
    alert("Ù…ÙŠØ²Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø³ØªÙÙØ¹Ù‘Ù„ Ù„Ø§Ø­Ù‚Ù‹Ø§ â¤ï¸");
  };

  renderGrid();
  </script>
</body>
</html>